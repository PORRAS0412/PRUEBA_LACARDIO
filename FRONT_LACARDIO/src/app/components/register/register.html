<form [formGroup]="pacienteForm" (ngSubmit)="enviarFormulario()" class="register-form" style="max-width: 800px; margin:auto; display:grid; gap:16px;">

  <h2>Datos del Paciente</h2>
  <div formGroupName="paciente">
    <mat-form-field appearance="fill">
      <mat-label>Tipo de Documento</mat-label>
      <mat-select formControlName="tipo_documento">
        <mat-option *ngFor="let tipo of tiposDocumento" [value]="tipo">{{ tipo }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Número de Documento</mat-label>
      <input matInput type="text" formControlName="numero_documento">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Nombres</mat-label>
      <input matInput type="text" formControlName="nombres">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Apellidos</mat-label>
      <input matInput type="text" formControlName="apellidos">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Fecha de Nacimiento</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="fecha_nacimiento">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Sexo</mat-label>
      <mat-select formControlName="sexo">
        <mat-option *ngFor="let s of sexos" [value]="s">{{ s }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Correo</mat-label>
      <input matInput type="email" formControlName="correo">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Teléfono</mat-label>
      <input matInput type="text" formControlName="telefono">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Dirección</mat-label>
      <input matInput type="text" formControlName="direccion">
    </mat-form-field>
  </div>

  <h2>Datos Financieros</h2>
<div formGroupName="financiero">
  <mat-form-field appearance="fill">
    <mat-label>Ingresos Mensuales</mat-label>
    <input matInput type="number" formControlName="ingresos_mensuales">
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Gastos Mensuales</mat-label>
    <input matInput type="number" formControlName="gastos_mensuales">
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Deudas</mat-label>
    <input matInput type="number" formControlName="deudas">
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Capacidad de Pago (15%)</mat-label>
    <input matInput type="number" formControlName="capacidad_pago" >
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Puntaje de Riesgo</mat-label>
    <input matInput type="number" min="0" max="5" formControlName="puntaje_riesgo">
  </mat-form-field>
</div>

<p><strong>Capacidad de Pago:</strong> {{ pacienteForm.get('financiero.capacidad_pago')?.value | currency:'USD':'symbol':'1.0-0' }}</p>
<p>{{ explicacionCapacidad }}</p>

<p><strong>Puntaje de Riesgo:</strong> {{ pacienteForm.get('financiero.puntaje_riesgo')?.value }}</p>
<p>{{ explicacionRiesgo }}</p>


  <h2>Datos Complementarios</h2>
  <div formGroupName="complementario">
    <mat-form-field appearance="fill">
      <mat-label>Contacto de Emergencia</mat-label>
      <input matInput formControlName="contacto_emergencia">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Teléfono de Emergencia</mat-label>
      <input matInput formControlName="telefono_emergencia">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Alergias</mat-label>
      <input matInput formControlName="alergias">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Enfermedades</mat-label>
      <input matInput formControlName="enfermedades">
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Observaciones</mat-label>
      <textarea matInput formControlName="observaciones"></textarea>
    </mat-form-field>
  </div>

  <button mat-raised-button color="primary" type="submit">Registrar Paciente</button>
</form>
